{{ form_start(form, {'method':'POST', 'action': path('app_client_edit', {'id': client.id}),'attr': {'id': 'clientForm'}}) }}
<div class="col-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <!-- Message flash -->
        <div id="flashMessage" class="alert alert-success d-none"></div>
        <h4 class="card-title">Infos. prospect</h4>
        
        <p class="card-description"></p>
          <div class="row">
            <div class="col">
              {{ form_label(form.source) }}
              {{ form_widget(form.source) }}
            </div>
            <div class="col">
              {{ form_label(form.added_date) }}
              {{ form_widget(form.added_date) }}
            </div>
            <div class="col">
              {{ form_label(form.added_time) }}
              {{ form_widget(form.added_time) }}
            </div>
            <div class="col">
              {{ form_label(form.user) }}
              {{ form_widget(form.user) }}
            </div>
            <div class="col">
              {{ form_label(form.phase) }}
              {{ form_widget(form.phase) }}
            </div>
            <div class="col">
              {{ form_label(form.status) }}
              {{ form_widget(form.status) }}
            </div>
          </div>
          <hr>
          <div class="form-group">
            {{ form_label(form.first_name) }}
            {{ form_widget(form.first_name) }}
          </div>
          <div class="form-group">
            {{ form_label(form.last_name) }}
            {{ form_widget(form.last_name) }}
          </div>
          <div class="form-group">
            {{ form_label(form.email) }}
            {{ form_widget(form.email) }}
          </div>
          <div class="form-group">
            {{ form_label(form.phone) }}
            {{ form_widget(form.phone) }}
          </div>
          <button class="btn btn-primary">{{ button_label|default('Valider') }}</button>
      </div>
    </div>
     
</div>



{{ form_end(form, { 'render_rest': false }) }}
{% if app.request.attributes.get('_route') == 'app_client_edit' %}
<div class="card mt-3">
    <div class="card-body">
        <h4 class="card-title">Adresses</h4>
        <p class="card-description"></p>
       <table class="table" id="addressTable">
          <thead>
              <tr>
                  <th>Designation</th>
                  <th>Adresse 1</th>
                  <th>Adresse 2</th>
                  <th>Ville</th>
                  <th>Code postal</th>
                  <th>Pays</th>
                  <th>Actions</th>
              </tr>
          </thead>
          <tbody>
              {% for address in client.adresses %}
                  <tr>
                      <td><b>{{ address.designation }}</b></td>
                      <td>{{ address.address1 }}</td>
                      <td>{{ address.address2 }}</td>
                      <td>{{ address.city }}</td>
                      <td>{{ address.zip }}</td>
                      <td>{{ address.country }}</td>
                      <td>
                        <button class="btn btn-danger btn-sm delete-address" data-id="{{ address.id }}">Supprimer</button>
                      </td>
                  </tr>
              {% else %}
                  <tr id="noAddressRow">
                      <td colspan="7" class="text-center">Aucune adresse ajoutée</td>
                  </tr>
              {% endfor %}
          </tbody>
      </table>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#AdresseForm">
          Creer une nouvelle adresse
        </button>

    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="AdresseForm" tabindex="-1" aria-labelledby="AdresseFormLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="AdresseFormLabel">Nouvelle adresse</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      {{ form_start(adress_form, {'action': path('app_api_adresses_add', {'clientId': client.id}),'attr': {'id': 'adressForm'}}) }}
      <div class="modal-body">

        <div class="form-group">
          <label for="">Designation</label>
          {{ form_widget(adress_form.designation) }}
        </div>
        <div class="form-group">
          <label for="">Adresser 1</label>
          {{ form_widget(adress_form.address_1) }}
        </div>
        <div class="form-group">
          <label for="">Adresser 2</label>
          {{ form_widget(adress_form.address_2) }}
        </div>
        <div class="form-group">
          <label for="">Ville</label>
          {{ form_widget(adress_form.city) }}
        </div>
        <div class="form-group">
          <label for="">Code postal</label>
          {{ form_widget(adress_form.zip) }}
        </div>
        <div class="form-group">
          <label for="">Pays</label>
          {{ form_widget(adress_form.country) }}
        </div>    
        
      </div>
      
      <div class="modal-footer">
        {{ form_widget(adress_form.submit) }}
      </div>
      {{ form_end(adress_form) }} 
    </div>
  </div>
</div>
{% endif %}
<div class="card mt-3">
    <div class="card-body">
        <a class="btn btn-outline-primary" href="{{ path('app_client_index') }}">< Retour à la liste</a>
        <button class="btn btn-outline-primary">Etape suivante ></button>
    </div>
</div>


<script src="{{ asset('js/statusPhase.js') }}"></script>
<script src="{{ asset('js/adress.js') }}"></script>
<script src="{{ asset('js/client.js') }}"></script>
